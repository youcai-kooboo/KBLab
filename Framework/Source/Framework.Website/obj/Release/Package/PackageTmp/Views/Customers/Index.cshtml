@using System.Collections
@using MD.Core.Helpers
@using MD.Domain.Model
@model MD.Web.Models.SearchModel

@{
    ViewBag.Title = "Klanten";
    PagedList<Customers> items = ViewBag.Customers as PagedList<Customers>;

    var recordStart = items.StartRecordIndex;
    var recordEnd = items.EndRecordIndex;
 
    string startDate = Model.VerzendDatumTijd_Start == null ? String.Empty : Model.VerzendDatumTijd_Start.Value.ToString("dd/MM/yyyy");
    string endDate = Model.VerzendDatumTijd_End == null ? String.Empty : Model.VerzendDatumTijd_End.Value.ToString("dd/MM/yyyy");

    List<SelectListItem> AantalOpens = new List<SelectListItem>()
        {
            new SelectListItem() {Text = "Ja", Value = true.ToString()},
            new SelectListItem() {Text = "Nee", Value = false.ToString()}
        };
}
<div class="row-fluid">
    <div class="box span12">
        <div class="box-header well" data-original-title>
            <h2><i class="icon-edit"></i>Klanten</h2>
        </div> 
        
        <div class="box-content">
            <div class="span12">
                  @using (Html.BeginForm())
                  {
                      <div id="DataTables_Table_0_length" class="dataTables_length">
                          <ul class="breadcrumb">
                              <li>
                                  <table style="margin-bottom:9px;width:100%">
                                      <tr>
                                          <td style="display:none">
                                              Emailverzending @Html.ListBoxFor(model => model.EmailNaams, (List<SelectListItem>) Session["EmailNames"],new {multiple="multiple",@class="multiselect"})
                                          </td>
                                          <td style="width: 20px"></td>
                                          <td style="display:none">
                                              Accountmanager/beheerder/intermediair @Html.ListBoxFor(model => model.NaamAfzenders, (List<SelectListItem>) Session["NaamAfzenders"],new {multiple="multiple",@class="multiselect"})
                                          </td>
                                          <td style="width: 20px"></td>
                                          <td style="display:none">
                                              Kanaal
                                              @Html.ListBoxFor(model => model.Kanaals, (List<SelectListItem>) Session["Kanaals"],new {multiple="multiple",@class="multiselect"})
                                          </td>
                                          <td style="width: 20px"></td>
                                           <td style="display:none">
                                              Geopend
                                              @Html.ListBoxFor(model => model.AantalOpens, AantalOpens,new {multiple="multiple",@class="multiselect"})
                                          </td>
                                          <td style="width: 20px"></td>
                                          <td>
                                              Datum vanaf <br> 
                                              <input id="startDate" name="startDate" class="input focused datepicker" placeholder="None selected" style="margin-bottom:-5px;width: 150px" type="text" value="@startDate">            
                                           @*   @Html.TextBoxFor(m => m.VerzendDatumTijd_Start,string.Format("{0:dd/MM/yyyy}",Model.VerzendDatumTijd_Start), new {@class = "input focused datepicker",style="margin-bottom:-5px", placeholder = "None selected"})*@
                                              @Html.HiddenFor(m => m.VerzendDatumTijd_Start)
                                          </td>
                                          <td style="width: 20px"></td>
                                          <td>
                                              Datum tot <br>
                                              <input id="endDate" name="endDate" class="input focused datepicker" placeholder="None selected" style="margin-bottom:-5px;width: 150px" type="text" value="@endDate">  
                                                        @*@Html.TextBoxFor(m => m.VerzendDatumTijd_End,string.Format("{0:dd/MM/yyyy}",Model.VerzendDatumTijd_End), new {@class = "input focused datepicker",style="margin-bottom:-5px", placeholder = "None selected"})*@
                                              @Html.HiddenFor(m => m.VerzendDatumTijd_End)
                                          </td>
                                          <tr>
                                              <td colspan="8" style="padding-top: 5px">
                                                  <button class="btn  btn-primary" type="submit" name="Filter" value="Filter">Filter</button> 
                                                  <button class="btn  btn-primary" type="submit" name="Reset" value="Reset">Reset</button> 
                                                  <button class="btn  btn-primary" type="button" onclick="javascript:window.location='@Url.Action("Export", "Customers")'">Export to Excel</button>
                                                  <a style="border-left-width: 0px; margin-left: 15px;" href="http://proddv.sentia.nl/menzis/manual/manual2.pdf" target="_blank" class="btn btn">Handleiding</a>
                                              </td>
                                          </tr>
                                      </tr>
                                  </table>
                              </li> 
                          </ul>
                      </div>
                  }

                <table id="CategoryListGrid" class="table table-striped table-bordered bootstrap-datatable datatable" >
                    <thead>
                        <tr role="row">
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" >Emailverzending</th>
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" >Accountmanager</th>
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" >Bedrijfsnaam</th>
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" >Collectiviteitsnummer</th>
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" >Aangekomen</th>
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" >Opendatum</th>                           
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" style="width:60px"># Opens</th>
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" >Klikdatum</th>
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" style="width:50px"># Kliks</th>
                            <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Actions: activate to sort column ascending" ></th>
                        </tr>
                    </thead>

                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                        @foreach (Customers item in items)
                        {
                            <tr class="odd">
                                <td >@item.EmailNaam</td>
                                <td >@item.NaamAfzender</td>
                                <td >@item.BedrijfsNaam</td>
                                <td >@item.CollectiviteitsNummer</td>
                                <td >@item.AangekomenJN</td>
                                <td >@(item.LaatsteOpenDatumTijd==null?String.Empty:(item.LaatsteOpenDatumTijd.Value.ToString("dd/MM/yyyy hh:mm")))</td>
                                <td >@item.AantalOpens</td>
                                <td >@(item.LaatsteKlikDatumTijd==null?String.Empty:(item.LaatsteKlikDatumTijd.Value.ToString("dd/MM/yyyy hh:mm")))</td>
                                <td >@item.AantalKliks</td>
                                <td ><a href="@Url.Action("Detail", "Customers",new {Id =item.Id})" class="modelDetail" title="Bekijk details" id="modelDetail@(item.Id)" data-value="@item.Id">
                                         <i class="icon-zoom-in"></i>
                                     </a>
                                    
                                </td>
                            </tr>
                        }

                    </tbody>
                </table>

            </div>
        </div>
        <div class="box-content">
            <div class="span12">
                      <table id="CategoryListGrid" class="table"><tr><td  style="border: 0px" ><label>
                        <select size="1" name="DataTables_Table_0_length" aria-controls="DataTables_Table_0" id="pagesizeSelector" style="width: auto">
                            <option value="10" @(items.PageSize == 10 ? "selected=\"selected\"" : String.Empty)>10</option>
                            <option value="20" @(items.PageSize == 20 ? "selected=\"selected\"" : String.Empty)>20</option>
                            <option value="50" @(items.PageSize == 50 ? "selected=\"selected\"" : String.Empty)>50</option>
                        </select>
                        records per page
                    </label></td><td style="text-align: right;border: 0px">@recordStart - @recordEnd of @items.TotalItemCount records</td></tr></table>
                    <div id="pager" class="center"></div>
                </div>
            
        </div>
    </div>
</div>

<script src="~/Content/Bootstrap/js/bootstrap-paginator.min.js"></script>
<script type='text/javascript'>

    var options = {
        currentPage: @(items.CurrentPageIndex),
        totalPages: @(items.TotalPageCount),
        alignment: "center",
        pageUrl: function(type, page, current) {
            return '@Url.Action("Index", "Customers")' + "?pageIndex=" + page;
        }
    };

    $('#pager').bootstrapPaginator(options);
    $("#pagesizeSelector").change(function() {
        var val = $("#pagesizeSelector").val();
        window.location = '@Url.Action("Index", "Customers")' + "?pageSize=" + val;
    });
        
</script>